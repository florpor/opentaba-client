[![Build Status](https://travis-ci.org/niryariv/opentaba-client.png?branch=master)](https://travis-ci.org/niryariv/opentaba-client)Client code for OpenTaba - details will arrive soon, but the code is pretty simple to understand.If you came looking for the server side of opentaba It's [here](https://github.com/niryariv/opentaba-server).##Testingsee [what's needed](tests/testing.md) with testing.##Production###ArchitectureThe production environment is made up of a github pages site per municipality, all being updated from onemain repository's master branch: [niryariv/opentaba-client](http://github.com/niryariv/opentaba-client/).This is done mainly to support different subdomains for different municipalities, but also to providethe ability to modify certain municipalities' sites without modifying all of them.###MaintenanceMaintenance is done using [fabric](http://fabfile.org), by activating different tasks defined in fabfile.py (for a list of all tasks, run `fab -l`, and for details about a specific task run `fab -d <task-name>`)To execute a task, run: `fab task-name:arg1,arg2...` or `fab task-name:arg1=val1,arg2=val2...`For step-by-step instructions on how to add a new municipality, go to [Deploy a New Municipality](##Deploy a New Municipality)Main tasks:+ create_site (site_name) : create a new github repo, add a new remote to the local git repository for the new repo,   push (deploy) only to gh_pages branch, and edit the new repository's CNAME file for subdomain attaching.+ delete_site (site_name) : delete a github repository and remove it from the local git repository's remotes.+ deploy_all () : push all changes done in the local repository to all remote repositories defined in the   remote "all_sites".##Want to help?look at the issues. Lots of work here ##Municipality Index FileThe municipality index file resides in "data/index.js", and has some neededinformation about each municipality.Mandatory fields:+ "display" - the Hebrew (or whatever) display name for the municipality+ "center" - the center point of the municipality's gush mapOptional fields:+ "server" - the base url for the server that hosts this municipality's plans.  If not defined it is "http://opentaba-server-<muni-name>.herokuapp.com/"+ "file" - path in the repository to the municipality's gush map.  If not defined it is "data/<muni-name>.topojson"+ "fb_link" - link to the municipality's facebook page.  If not defined the facebook icon will open a "share on facebook" window+ "twitter_link" - link to the municipality's twitter page.  If not defined the twitter icon will open a "tweet" window##Deploy a New MunicipalityTo deploy a website for a brand new municipality, follow these steps:(The steps use givataiim as example. You should change that to whatevermunicipality you are deploying)1. Make sure both the geojson and topojson files with the name of the municipality   have been added to [this repository](http://github.com/niryariv/israel_gushim)2. Add the data about the new municipality and the topojson gush map for it:   `fab add_gush_map:givataiim,גבעתיים`3. The changes will be made locally and not comitted so you can review them.   If any more properties need to be added to data/index.js (in compliance   to the [Municipality Index File](##Municipality Index File). When done,   commit the changes and push to origin.4. Now it's time to actually create the new site. Run:   `fab create_site:givataiim`5. Add a new hostname (subdomain) in your domain management control panel. Set   the name to your municipality's name (givataiim for this example), record   type to "CNAME (Alias)" and url to "<your-github-account>.github.io."ץ   It will take a few minutes to make the link (DNS and Github).